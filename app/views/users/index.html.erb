<div class="container md:w-4/5 w-11/12 mx-auto" >
  <div class="flex flex-col justify-center items-center relative">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
      <% @users.each do |user| %>
        <div class="w-80 h-96 overflow-hidden border rounded relative">
          <div class="py-3 ">
            <div class="mx-4">
              <div class="avatar mt-4 ml-2">
                <div class="w-20 rounded-full">
                  <%= image_tag(user.avatar.present? ? user.avatar.url : "default.png", alt: "アイコン") %>
                </div>
              </div>
              <div class="mt-3">
                <%= render "users/user_index", user: user %>
              </div>
              <div class="mt-3 mb-4 clamp-3">
                <% user.skills.each do |skill| %>
                  <div class="badge badge-ghost ml-2 text-slate-500"><%= skill.name %></div>
                <% end %>
              </div>
            </div>
            <div class="absolute bottom-2 left-2 right-2">
              <% unless user == current_user %>
                <% if current_user.following?(user) %>
                  <%= button_to 'フォロー解除',
                                user_relationship_path(user_id: user.id, id: current_user.active_relationships.find_by(followed_id: user.id)),
                                method: :delete,
                                data: { turbo_method: :delete },
                                class: "w-full justify-center rounded border border-slate-300 bg-white py-2 text-sm font-medium text-black" %>
                <% else %>
                  <%= button_to 'フォローする',
                                user_relationships_path(user_id: user.id),
                                params: { followed_id: user.id },
                                data: { turbo: false },
                                class:"justify-center w-full rounded border border-slate-300 bg-white p-2 text-sm font-medium text-black" %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="w-80 ">
      <%= link_to "マイページに戻る", user_mypage_path(current_user), class:"inline-flex h-10 items-center justify-center gap-2 w-full rounded border border-slate-300 bg-white p-2 text-sm font-medium text-black mt-10"%>
    </div>
  </div>
</div>

